!function(t){t.gritter={},t.gritter.options={position:"",class_name:"",fade_in_speed:"medium",fade_out_speed:1e3,time:6e3,max_to_display:0,close_on_click:!1},t.gritter.add=function(t){try{return e.addToQueue(t||{})}catch(i){var r="Gritter Error: "+i;"undefined"!=typeof console&&console.error?console.error(r,t):alert(r)}},t.gritter.remove=function(t,i){e.removeSpecific(t,i||{})},t.gritter.removeAll=function(t){e.stop(t||{})};var e={position:"",fade_in_speed:"",fade_out_speed:"",time:"",close_on_click:"",_custom_timer:0,_item_count:0,_is_setup:0,_tpl_close:'<a class="gritter-close" href="#" tabindex="1">Close Notification</a>',_tpl_title:'<span class="gritter-title">[[title]]</span>',_tpl_item:'<div id="gritter-item-[[number]]" class="gritter-item-wrapper [[item_class]]" style="display:none" role="alert"><div class="gritter-item">[[close]][[image]]<div class="[[class_name]]">[[title]]<p>[[text]]</p></div><div style="clear:both"></div></div><div class="gritter-bottom"></div></div>',_tpl_wrap:'<div id="gritter-notice-wrapper"></div>',_notificaiton_queue:[],addToQueue:function(e){return"string"==typeof e&&(e={text:e}),this._item_count++,this._notificaiton_queue.push(t.extend(e,{item_number:this._item_count})),this._updateDomFromQueue(),this._item_count},_updateDomFromQueue:function(){var e=t.gritter.options.max_to_display;(!(e>0)||t(".gritter-item-wrapper").length<e)&&this._notificaiton_queue.length>0&&this._addToDom(this._notificaiton_queue.shift())},_addToDom:function(i){if(null===i.text)throw'You must supply "text" parameter.';this._is_setup||this._runSetup();var r=i.title,o=i.text,n=i.image||"",s=i.sticky||!1,c=i.class_name||t.gritter.options.class_name,a=t.gritter.options.position,u=i.time||"",p=i.close_on_click||!1;this._verifyWrapper();var l=i.item_number,m=this._tpl_item;if(t(["before_open","after_open","before_close","after_close","on_click"]).each(function(r,o){e["_"+o+"_"+l]=t.isFunction(i[o])?i[o]:function(){}}),this._custom_timer=0,u&&(this._custom_timer=u),r=r?this._str_replace("[[title]]",r,this._tpl_title):"",m=this._str_replace(["[[title]]","[[text]]","[[close]]","[[image]]","[[number]]","[[class_name]]","[[item_class]]"],[r,o,this._tpl_close,""!==n?'<img src="'+n+'" class="gritter-image" />':"",l,""!==n?"gritter-with-image":"gritter-without-image",c],m),!1===this["_before_open_"+l]())return!1;t("#gritter-notice-wrapper").addClass(a).append(m);var f=t("#gritter-item-"+l);f.fadeIn(this.fade_in_speed,function(){e["_after_open_"+l](t(this))}),s||this._setFadeTimer(f,l),t(f).click(function(){e["_on_click_"+l](t(this)),p&&e.removeSpecific(l,{},t(f),!0)}),t(f).find(".gritter-close").bind("mouseenter mouseleave",function(i){"mouseenter"==i.type?t(f).off("click"):t(f).on("click",function(){e["_on_click_"+l](t(this)),p&&e.removeSpecific(l,{},t(f),!0)})}),t(f).bind("mouseenter mouseleave",function(i){"mouseenter"===i.type?s||e._restoreItemIfFading(t(this),l):s||e._setFadeTimer(t(this),l)}),t(f).find(".gritter-close").click(function(){return e.removeSpecific(l,{},null,!0),!1})},_countRemoveWrapper:function(e,i,r){i.remove(),this["_after_close_"+e](i,r),0===t(".gritter-item-wrapper").length&&t("#gritter-notice-wrapper").remove()},_fade:function(t,i){var r=arguments[2]||{},o=arguments[3]||!1,n=void 0===r.fade||r.fade,s=r.speed||this.fade_out_speed,c=o;this["_before_close_"+i](t,c),o&&t.unbind("mouseenter mouseleave"),n?t.animate({opacity:0},s,function(){t.animate({height:0},300,function(){e._countRemoveWrapper(i,t,c)})}):this._countRemoveWrapper(i,t)},removeSpecific:function(e,i){var r=arguments[2]||!1,o=arguments[3]||!1;r||(r=t("#gritter-item-"+e)),this._fade(r,e,i||{},o)},_restoreItemIfFading:function(t,e){clearTimeout(this["_int_id_"+e]),t.stop().css({opacity:"",height:""})},_runSetup:function(){for(var e in t.gritter.options)this[e]=t.gritter.options[e];this._is_setup=1},_setFadeTimer:function(t,i){var r=this._custom_timer?this._custom_timer:this.time;this["_int_id_"+i]=setTimeout(function(){e._fade(t,i)},r)},stop:function(e){var i=t.isFunction(e.before_close)?e.before_close:function(){},r=t.isFunction(e.after_close)?e.after_close:function(){},o=t("#gritter-notice-wrapper");i(o),o.fadeOut(function(){t(this).remove(),r()})},_str_replace:function(t,e,i,r){var o=0,n=0,s="",c="",a=0,u=0,p=[].concat(t),l=[].concat(e),m=i,f=l instanceof Array,d=m instanceof Array;for(m=[].concat(m),r&&(this.window[r]=0),o=0,a=m.length;o<a;o++)if(""!==m[o])for(n=0,u=p.length;n<u;n++)s=m[o]+"",c=f?void 0!==l[n]?l[n]:"":l[0],m[o]=s.split(p[n]).join(c),r&&m[o]!==s&&(this.window[r]+=(s.length-m[o].length)/p[n].length);return d?m:m[0]},_verifyWrapper:function(){0===t("#gritter-notice-wrapper").length&&t("#c2canvasdiv").append(this._tpl_wrap)}}}(jQuery);